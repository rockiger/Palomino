// Generated by CoffeeScript 1.9.3
(function() {
  var Glib, Gtk, Lang, Palomino, Webkit, app;

  Gtk = imports.gi.Gtk;

  Lang = imports.lang;

  Webkit = imports.gi.WebKit2;

  Glib = imports.gi.GLib;

  Palomino = new Lang.Class({
    Name: 'Palomino',
    _init: function() {
      this.application = new Gtk.Application();
      this.application.connect('activate', Lang.bind(this, this._onActivate));
      return this.application.connect('startup', Lang.bind(this, this._onStartup));
    },
    _onActivate: function() {
      return this.window.present();
    },
    _onStartup: function() {
      return this._buildUI();
    },
    _buildUI: function() {
      this._window = new Gtk.ApplicationWindow({
        application: this.application,
        title: 'Palomino',
        default_width: 1600,
        default_height: 900,
        window_position: Gtk.WindowPosition.CENTER
      });
      this._window.set_icon_from_file('/home/macco/Listings/Palomino/resources/palomino.svg');
      this._webview = new Webkit.WebView();
      this._webview.connect('show-notification', Lang.bind(this, this._onShowNotification));
      this._webview.load_uri('https://mail.google.com/', null);
      this._webcontext = this._webview.web_context;
      print('WEBCONTEXT');
      print(this._webcontext);
      this._cookie_manager = this._webcontext.get_cookie_manager();
      this._cookie_manager.set_persistent_storage('/home/macco/.palomino_cookies.txt', Webkit.CookiePersistentStorage.TEXT);
      this._window.add(this._webview);
      return this._window.show_all();
    },
    _onShowNotification: function() {
      return print('show-notification');
    }
  });

  app = new Palomino();

  app.application.run(ARGV);

}).call(this);
